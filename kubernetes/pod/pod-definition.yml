apiVersion: v1

kind: Pod

metadata:
  name: myapp-pod
  labels:
    app: myapp
    location: KR
    type: back-end
    anythingyouwant: ok

spec:
  containers:
    - name: nginx-container
      image: nginx
      envFrom:
        # configMap 전체 다 가져오기
        - configMapRef:
            name: app-configmap
        # secret 가져오기
        - secretRef:
            name: app-secret
      env:
        # configMap에서 한 개만 가져오기
        - name: APP_ANY_ENV
          valueFrom:
            configMapKeyRef:
              name: app-configmap
              key: APP_ANY_ENV
        # secret 한 개만 가져오기
        - name: DB_PASSWORD
          valueFrom:
            secretKeyRef:
              key: DB_PASSWORD
              name: app-secret
  # volume 사용
  volumes:
    - name: app-config-volume
      configMap:
        name: app-configmap
    - name: app-secret-volume
      secret:
        secretName: app-secret
